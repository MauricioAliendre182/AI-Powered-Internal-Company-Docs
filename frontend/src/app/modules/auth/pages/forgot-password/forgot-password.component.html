<app-auth-layout [title]="isSubmitted ? 'Check Your Email' : 'Forgot Password'"
  [subtitle]="isSubmitted ? 'We\'ve sent a reset link to your email' : 'Enter your email to reset your password'"
  [showBackToLogin]="!isSubmitted" [backToLoginText]="'Back to Login'" [backToLoginRoute]="'/login'">

  <!-- Email Sent Success Message -->
  @if(isSubmitted) {
    <div class="success-message">
      <div class="success-icon">
        <i class="fas fa-envelope-circle-check"></i>
      </div>
      <h3 class="success-title">Email Sent Successfully!</h3>
      <p class="success-description">
        We've sent a password reset link to your email address.
        Please check your inbox and follow the instructions to reset your password.
      </p>

      <div class="success-actions">
        <app-auth-button
          [text]="'Back to Login'"
          [icon]="'arrow-left'"
          [variant]="'primary'"
          [size]="'md'"
          [fullWidth]="true"
          (clicked)="onBackToLogin()"
        >
        </app-auth-button>

        <app-auth-button
          [text]="'Resend Email'"
          [icon]="'redo'"
          [variant]="'outline'"
          [size]="'md'"
          [fullWidth]="true"
          (clicked)="onResendEmail()"
        >
        </app-auth-button>
      </div>
    </div>
  }

  <!-- Forgot Password Form -->
  @if(!isSubmitted) {
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
      <!-- Info Message -->
      <div class="info-message">
        <i class="fas fa-info-circle"></i>
        <p>Enter your email address and we'll send you a link to reset your password.</p>
      </div>

      <!-- Email Field -->
      <app-auth-form-field
        [label]="'Email Address'"
        [type]="'email'"
        [icon]="'envelope'"
        [placeholder]="'Enter your email address'"
        [required]="true"
        formControlName="email"
        [errorMessage]="getFieldError('email')">
      </app-auth-form-field>

      <!-- Submit Button -->
      <app-auth-button
        [type]="'submit'"
        [text]="'Send Reset Link'"
        [icon]="'paper-plane'"
        [variant]="'primary'"
        [size]="'lg'"
        [fullWidth]="true"
        [loading]="isLoading"
        [disabled]="forgotPasswordForm.invalid">
      </app-auth-button>

      <!-- Back to Login Link -->
      <div class="auth-links">
        <p class="back-text">
          Remember your password?
          <a routerLink="/login" class="back-link">Sign in here</a>
        </p>
      </div>
    </form>
  }
</app-auth-layout>
